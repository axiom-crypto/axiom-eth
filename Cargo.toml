[package]
name = "halo2-mpt"
version = "0.0.1"
edition = "2021"

[patch.crates-io]
#bitvec = { git = "https://github.com/ed255/bitvec.git", rev = "5cfc5fa8496c66872d21905e677120fc3e79693c" }
halo2_proofs = { git = "https://github.com/privacy-scaling-explorations/halo2.git", tag = "v2022_09_10" }

[patch."https://github.com/privacy-scaling-explorations/halo2"]
halo2_proofs = { git = "https:///github.com//privacy-scaling-explorations/halo2", tag =  "v2022_09_10" }

[patch."https://github.com/privacy-scaling-explorations/zkevm-circuits"]
zkevm-circuits = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak" }
eth-types = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak" }
keccak256 = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak" }

[dependencies]
num-bigint = { version = "0.4", features = ["rand"] }
num-integer = "0.1"
num-traits = "0.2"
ff = "0.12.0"
group = "0.11"
itertools = "0.10"
lazy_static = "1.4.0"
halo2_base = { git = "https://github.com/jonathanpwang/halo2-ecc.git", branch = "refactor/10-01" }
halo2_proofs = { git = "https://github.com/privacy-scaling-explorations/halo2.git", tag = "v2022_09_10" }
hex = "0.4.3"
rand_core = { version = "0.6", default-features = false }
rand = "0.8"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# zkevm
ecdsa = { git = "https://github.com/privacy-scaling-explorations/halo2wrong", tag = "v2022_09_09", optional = true }
ecc =       { git = "https://github.com/privacy-scaling-explorations/halo2wrong", tag = "v2022_09_09", optional = true }
eth-types = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak", optional = true  }
keccak256 = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak", optional = true }
maingate =  { git = "https://github.com/privacy-scaling-explorations/halo2wrong", tag = "v2022_09_09", optional = true }
integer =   { git = "https://github.com/privacy-scaling-explorations/halo2wrong", tag = "v2022_09_09", optional = true }
zkevm-circuits = { git = "https://github.com/yi-sun/zkevm-circuits.git", branch = "expose-keccak", optional = true }

plotters = { version = "0.3.0", optional = true }
tabbycat = { version = "0.1", features = ["attributes"], optional = true }

[target.'cfg(not(target_env = "msvc"))'.dependencies]
jemallocator = "0.3.2"

[dev-dependencies]
ark-std = { version = "0.3.0", features = ["print-trace"] }
num-bigint = { version = "0.4.3" }

[features]
default = []
zkevm = ["dep:ecdsa", "dep:ecc", "dep:eth-types", "dep:keccak256", "dep:maingate", "dep:integer", "dep:zkevm-circuits"]
dev-graph = ["halo2_proofs/dev-graph", "plotters"]

[profile.release]
debug = true